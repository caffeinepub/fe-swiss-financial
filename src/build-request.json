{
  "kind": "build_request",
  "title": "Permanent hardcoded admin initialization fix",
  "projectName": "FE Swiss Financial",
  "priority": "high",
  "requirements": [
    {
      "id": "REQ-1",
      "text": "Remove the bootstrapAdmin function entirely from backend/main.mo",
      "target": "backend",
      "source": {
        "messageIds": [
          "msg-last"
        ],
        "quotes": [
          "REMOVE the bootstrapAdmin function entirely"
        ]
      },
      "acceptanceCriteria": [
        "The bootstrapAdmin function no longer exists in main.mo",
        "No callable function for bootstrap logic remains"
      ]
    },
    {
      "id": "REQ-2",
      "text": "Add hardcoded admin initialization code in backend/main.mo immediately after 'include MixinAuthorization(accessControlState);' that checks if principal 'grzx7-efvee-eiav7-cphgh-j7zbs-jju44-7e5zt-embnv-eki5c-gmoof-uqe' exists as admin in accessControlState, and if not, directly adds them with name 'System Administrator' and role 'Admin' to the same data structure that getAdminEntries reads from",
      "target": "backend",
      "source": {
        "messageIds": [
          "msg-last"
        ],
        "quotes": [
          "add initialization code that runs when the canister starts",
          "Check if principal \"grzx7-efvee-eiav7-cphgh-j7zbs-jju44-7e5zt-embnv-eki5c-gmoof-uqe\" has an admin entry",
          "add this principal as admin with name \"System Administrator\" and role \"Admin\" directly into the same data structure that getAdminEntries reads from"
        ]
      },
      "acceptanceCriteria": [
        "Initialization code runs automatically during canister deployment and upgrade",
        "Code checks for the specific principal in accessControlState",
        "If principal not found, it is added directly to accessControlState with the specified name and role",
        "The initialization executes before any function calls can be made to the canister",
        "getAdminEntries will return this hardcoded admin after initialization"
      ]
    },
    {
      "id": "REQ-3",
      "text": "Remove the useBootstrapAdmin hook from the frontend",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-last"
        ],
        "quotes": [
          "REMOVE the useBootstrapAdmin hook"
        ]
      },
      "acceptanceCriteria": [
        "The useBootstrapAdmin hook file or export no longer exists",
        "No references to useBootstrapAdmin remain in the codebase"
      ]
    },
    {
      "id": "REQ-4",
      "text": "Remove bootstrap logic from frontend/src/components/AppLayout.tsx while keeping the sidebar and all UI exactly as v41",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-last"
        ],
        "quotes": [
          "REMOVE the bootstrap logic from AppLayout.tsx",
          "Keep sidebar and all UI exactly as v41"
        ]
      },
      "acceptanceCriteria": [
        "No bootstrap-related code or useBootstrapAdmin calls exist in AppLayout.tsx",
        "Sidebar navigation remains unchanged from v41",
        "User profile display with dynamic role badge remains unchanged",
        "Logout functionality remains unchanged",
        "Layout and UI structure match v41 exactly"
      ]
    },
    {
      "id": "REQ-5",
      "text": "Update the version number displayed in the AppLayout footer from 'v41' to 'v42'",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-last"
        ],
        "quotes": [
          "Update version to v42"
        ]
      },
      "acceptanceCriteria": [
        "Footer displays 'v42' instead of 'v41'",
        "Version string is visible in the AppLayout component"
      ]
    }
  ],
  "constraints": [
    "The hardcoded principal must be exactly 'grzx7-efvee-eiav7-cphgh-j7zbs-jju44-7e5zt-embnv-eki5c-gmoof-uqe'",
    "Initialization must run automatically during canister startup, not as a callable function",
    "Frontend must continue using getMyAdminEntry normally without any bootstrap calls",
    "All v41 UI and sidebar functionality must remain unchanged except for bootstrap removal and version update"
  ],
  "nonGoals": [
    "Adding new admin management features",
    "Changing the admin data structure or schema",
    "Modifying any UI beyond bootstrap removal and version update",
    "Adding configuration options for the hardcoded admin principal"
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  }
}