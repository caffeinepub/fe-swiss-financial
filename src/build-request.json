{
  "kind": "build_request",
  "title": "Rollback application to Version 23 behavior",
  "projectName": "Swiss Financial CRM",
  "priority": "normal",
  "requirements": [
    {
      "id": "REQ-1",
      "text": "Revert the application (frontend and backend) to match Version 23 behavior and implementation, removing/regressing any changes introduced in Versions 24–26.",
      "target": "both",
      "source": {
        "messageIds": [
          "msg-4"
        ],
        "quotes": [
          "All back to version 23."
        ]
      },
      "acceptanceCriteria": [
        "After deployment, the app’s behavior matches Version 23 (no Version 24–26 changes remain).",
        "No new functionality introduced in Versions 24–26 is present after the rollback."
      ]
    },
    {
      "id": "REQ-2",
      "text": "Restore the Version 23 authentication/authorization + layout flow so that after Internet Identity login completes, the app reliably transitions into the authorized layout without hanging on or regressing the \"Verifying authorization...\" stage.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-4"
        ],
        "quotes": [
          "All back to version 23."
        ]
      },
      "acceptanceCriteria": [
        "When a user logs in, the app proceeds from the login screen to the authorized app layout (sidebar + routed pages) without indefinite loading.",
        "The authorization loading screen text remains in English and only appears while the actor and authorization status are actually being fetched."
      ]
    }
  ],
  "constraints": [
    "Do not edit any files under frontend/immutablePaths (e.g., frontend/src/hooks/useInternetIdentity.ts(x), frontend/src/hooks/useActor.ts, frontend/src/main.tsx, frontend/src/components/ui).",
    "Keep all Motoko logic in the single actor at backend/main.mo; only add backend/migration.mo if a state/schema upgrade is strictly required for the rollback."
  ],
  "nonGoals": [
    "Adding new features beyond restoring Version 23 behavior.",
    "Refactoring unrelated code or changing the visual design beyond what is necessary to match Version 23."
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  },
  "userProfileUpdate": {
    "goalsToAdd": [],
    "goalsToRemove": [],
    "preferencesToAdd": [],
    "preferencesToRemove": [],
    "miscToAdd": [],
    "miscToRemove": [],
    "fieldsToSet": {},
    "fieldsToDelete": []
  }
}